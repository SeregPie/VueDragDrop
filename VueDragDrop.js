!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.VueDragDrop=n()}(this,function(){"use strict";function i(t){return"function"==typeof t?t:(n=t,function(){return n});var n}var t={tag:{type:String,default:"div"},revertDuration:{type:Number,default:0},restrict:{},data:{}};function n(){}function h(t,o){var i={};return Object.entries(t).forEach(function(t){var n=t[0],e=t[1];i[n]=o(e,n)}),i}var e={relativeCurrentPosition:function(){var t=this.$el,n=this.currentPosition;if(t){var e=t.getBoundingClientRect(),o=e.left,i=e.top;return[n[0]-o,n[1]-i]}return n},relativePosition:function(){return function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return t.map(function(t,n){return[t].concat(e.map(function(t){return t[n]}))})}(this.relativeCurrentPosition,this.relativeStartPosition).map(function(t){return t[0]-t[1]})},relativeStartPosition:function(){var t=this.$el,n=this.startPosition;if(t){var e=t.getBoundingClientRect(),o=e.left,i=e.top;return[n[0]-o,n[1]-i]}return n},windowEventListeners:function(){var n=this;return h({mousemove:this.onMouseMove,mouseup:this.onMouseUp},function(t){return t.bind(n)})}};var o={triggerDrag:function(t){this.currentPosition=t},triggerDragEnd:function(t){this.currentPosition=t,this.dragged=!1},triggerDragStart:function(t){this.dragged=!0,this.startPosition=t,this.currentPosition=t}};function g(t){return t}var r={name:"VueDragItem",mixins:[function(t){var n=t.get,e=t.default;n=i(n);var o={};return Object.keys(e).forEach(function(e){o[e]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return this.strategy[e].apply(this,t)}}),{data:function(){return{getPartialStrategy:n}},computed:{strategy:function(){return Object.assign({},e,this.getPartialStrategy(function(t){this.getPartialStrategy=t?i(t):n}.bind(this)))}},methods:o}}({get:function(o){return{onTouchStart:function(t){if(1===t.touches.length){t.preventDefault();var e=[t.touches[0].clientX,t.touches[0].clientY];o({onTouchMove:function(t){if(1===t.touches.length){t.preventDefault();var n=[t.touches[0].clientX,t.touches[0].clientY];this.triggerDragStart(e),this.triggerDrag(n),o({onTouchMove:function(t){1===t.touches.length&&(t.preventDefault(),n=[t.touches[0].clientX,t.touches[0].clientY],this.triggerDrag(n))},onTouchEnd:function(t){1===t.changedTouches.length&&(t.preventDefault(),n=[t.changedTouches[0].clientX,t.changedTouches[0].clientY],this.triggerDragEnd(n),o())}})}},onTouchEnd:function(t){1===t.changedTouches.length&&(t.preventDefault(),o())}})}},onMouseDown:function(t){if(1===t.which){t.preventDefault();var e=[t.clientX,t.clientY];o({onMouseMove:function(t){t.preventDefault();var n=[t.clientX,t.clientY];this.triggerDragStart(e),this.triggerDrag(n),o({onMouseMove:function(t){t.preventDefault(),n=[t.clientX,t.clientY],this.triggerDrag(n)},onMouseUp:function(t){1===t.which&&(t.preventDefault(),n=[t.clientX,t.clientY],this.triggerDragEnd(n),o())}})},onMouseUp:function(t){1===t.which&&(t.preventDefault(),o())}})}}}},default:{onTouchStart:n,onTouchMove:n,onTouchEnd:n,onMouseDown:n,onMouseMove:n,onMouseUp:n}})],props:t,data:function(){return{dragged:!1,startPosition:[0,0],currentPosition:[0,0]}},computed:e,mounted:function(){Object.entries(this.windowEventListeners).forEach(function(t){var n=t[0],e=t[1];window.addEventListener(n,e)})},methods:o,render:function(t){var n=this,e=this,o=e.$scopedSlots,i=e.dragged,r=e.relativePosition,u=e.revertDuration,c=e.tag,a=(o=Object.assign({},{default:g},o)).default({dragged:i}),s={position:"relative"};i?s.transform="translate("+r.map(function(t){return t+"px"}).join(",")+")":0<u&&(s.transition=["transform",u+"ms"]);var f=t(c,{style:s},[a]);return t(c,{style:{display:"inline-block"},on:h({touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,mousedown:this.onMouseDown},function(t){return t.bind(n)})},[f])}},u=Object.freeze({DragItem:r}),c=Object.assign({},{install:function(n){Object.values(this.components).forEach(function(t){n.component(t.name,t)})},components:u},u);return"undefined"!=typeof window&&window.Vue&&window.Vue.use(c),c});
